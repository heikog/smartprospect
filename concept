Perfekt â€” mit den beiden Infos kann ich dir jetzt das Fachkonzept technisch aktualisieren.
Ich habe den Supabase-Link, die Render-Domain und den Excel-Download sauber integriert, ohne den Rest zu verÃ¤ndern.

â¸»

Smart Prospect â€“ MVP Fachkonzept (aktualisiert 10.11.2025)

0. KurzÃ¼berblick
	â€¢	Zweck: Personalisierte Offline-Flyer mit parametrisiertem QR-Code, der zu einer offenen Landingpage fÃ¼hrt.
	â€¢	Betriebsmodell: SaaS mit Credits (Stripe)
	â€¢	Auth: Supabase Magic Link
	â€¢	Orchestrierung: n8n (zwei Workflows)
	â€¢	Frontend: Next.js + Tailwind, deployed auf Render
	â€¢	Speicher/DB: Supabase
	â€¢	Startguthaben: 5 Credits bei erster Anmeldung
	â€¢	Credit-Logik: 1 Credit = 1 Prospect
	â€¢	Downloadbare Excel-Vorlage direkt in der App verfÃ¼gbar

â¸»

1) Rollen & Rechte

Kampagnen-Ersteller
	â€¢	legt Kampagnen an (Name, Upload Excel/CSV + PDF)
	â€¢	prÃ¼ft generierte Ergebnisse
	â€¢	gibt Kampagne frei und lÃ¶st Versand aus

â¸»

2) Statusmodell

Status	Beschreibung	AuslÃ¶ser
in_erstllg	Kampagne angelegt, n8n #1 gestartet	Upload & Start
bereit_zur_pruefung	n8n #1 fertig, Assets vorliegend	n8n #1 â†’ Callback
geprueft	Nutzer bestÃ¤tigt Assets	Button â€žGeprÃ¼ft OKâ€œ
versandt	n8n #2 Versand abgeschlossen	n8n #2 â†’ Callback


â¸»

3) End-to-End-Prozess

Upload & Generierung
	1.	Nutzer meldet sich per Magic Link an â†’ + 5 Credits
	2.	Nutzer legt Kampagne an:
	â€¢	Felder: Name, Excel/CSV, Service-PDF
	â€¢	App speichert beide Dateien in Supabase (uploads/â€¦)
	â€¢	App ruft n8n #1 auf:

POST https://n8n.sitesavvy.de/webhook/57fe870d-0ee0-4b6d-ba43-f87ed449a191


	â€¢	Credits = Zeilenanzahl Ã— 1 werden abgezogen
	â€¢	Kampagnen-Status â†’ in_erstllg

	3.	n8n #1: generiert alle Assets (Flyer + QR-Code + Landingpage-URL)
	â€¢	Callback:

POST https://smartprospect.onrender.com/api/callback/n8n/generation


	â€¢	setzt Status â†’ bereit_zur_pruefung

PrÃ¼fung & Freigabe
	â€¢	Popover-Tabelle: Stadt | Website | PDF | Landingpage
	â€¢	Vorschau Ã¼ber Links
	â€¢	Button â€žGeprÃ¼ft OKâ€œ â†’ Status geprueft

Versand
	â€¢	Button â€žKampagne versendenâ€œ ruft n8n #2 auf:

POST https://n8n.sitesavvy.de/webhook/be57dc86-a1a7-4ea4-95a6-f5f98251880f


	â€¢	n8n sendet an Druckdienstleister
	â€¢	Callback:

POST https://smartprospect.onrender.com/api/callback/n8n/send


	â€¢	setzt Status versandt

â¸»

4) Pflichtfelder & Vorlage-Download

Excel/CSV Pflichtspalten:

company_url | anrede | vorname | nachname | strasse | hausnummer | plz | ort

Downloadbare Vorlage (Ã¶ffentlich, Supabase Bucket static):
ðŸ‘‰ Beispiel-Excel herunterladenï¿¼

Frontend-Snippet:

<a
  href="https://esahpbsttcpiujqtxqet.supabase.co/storage/v1/object/public/static/prospect_template.xlsx"
  download
  className="inline-flex items-center px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700"
>
  Beispiel-Excel herunterladen
</a>

Regeln:
	â€¢	Generierung nur bei vollstÃ¤ndigen Pflichtfeldern
	â€¢	Fehlerhafte Zeilen werden geloggt, nicht blockierend
	â€¢	QR-Codes eindeutig (UUID v4)
	â€¢	Keine Ã„nderungen nach versandt

â¸»

5) Landingpage (Ã¶ffentlich)
	â€¢	Route:

https://smartprospect.onrender.com/p/{campaignId}/{prospectId}?t={uuid}


	â€¢	Keine Authentifizierung
	â€¢	LÃ¤dt personalisierte Inhalte aus Supabase
	â€¢	PrÃ¼ft t-Parameter â†’ 404, wenn ungÃ¼ltig

â¸»

6) Technischer Stack

Komponente	Aufgabe
Next.js + Tailwind	Frontend + API Routes
Supabase	Auth (Magic Link), Storage, DB
Stripe	Credits (Checkout / Webhook)
n8n #1	Generierung (Flyer + QR + Landingpage-URL)
n8n #2	Versand an Druckdienstleister
Render.com	Hosting der Next.js-App


â¸»

7) Callbacks & URLs

Funktion	Endpoint
App â†’ n8n #1	https://n8n.sitesavvy.de/webhook/57fe870d-0ee0-4b6d-ba43-f87ed449a191
n8n #1 â†’ App	https://smartprospect.onrender.com/api/callback/n8n/generation
App â†’ n8n #2	https://n8n.sitesavvy.de/webhook/be57dc86-a1a7-4ea4-95a6-f5f98251880f
n8n #2 â†’ App	https://smartprospect.onrender.com/api/callback/n8n/send
Excel-Template	https://esahpbsttcpiujqtxqet.supabase.co/storage/v1/object/public/static/prospect_template.xlsx


â¸»

8) Ziel des MVP
- kompletter mvp als end-to-end lÃ¶sung live und ausrollbar.
- keine dummy daten oder placeholder - bereit um produktiv gestellt zu werden
